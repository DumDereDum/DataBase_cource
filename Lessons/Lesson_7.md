# Написание агрегатных функций

CREATE AGGREGATE в PostgreSQL - это команда, которая позволяет создавать новые пользовательские агрегатные функции. Агрегатные функции в PostgreSQL позволяют выполнять вычисления над группами строк данных, такими как суммирование, нахождение среднего значения, подсчет числа строк и т. д. Создание пользовательских агрегатных функций дает возможность определить собственные способы агрегации данных, которые могут быть более специализированными или сложными, чем стандартные агрегатные функции.

## Синтаксис

```SQL
CREATE AGGREGATE aggregate_name (aggregate_signature)
(
    SFUNC = sfunc,
    STYPE = stype,
    FINALFUNC = finalfunc,
    INITCOND = initial_condition
);
```

Где:

* aggregate_name - это имя для новой агрегатной функции.
* aggregate_signature - это сигнатура агрегатной функции, указывающая типы данных аргументов функции.
* SFUNC - это функция, которая выполняет частичную агрегацию.
* STYPE - это тип данных промежуточного результата агрегации.
* FINALFUNC - это функция, которая выполняет окончательную обработку промежуточного результата.
* INITCOND - это начальное значение для промежуточного результата.

